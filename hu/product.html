<!DOCTYPE html>
<html data-bs-theme="dark">
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=chrome'>
    <title>Candle Flames</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <!--<link rel='stylesheet' type='text/css' media='screen' href='main.css'>-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inknut+Antiqua:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        html {
  scroll-behavior: smooth;
}

footer {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

body {
    font-family: "Inknut Antiqua", Tofu;
}
		#content {
			padding: 20px;
		}

/* Style the Image Used to Trigger the Modal */
#image-container {
    transition: 0.3s;
    background-color: rgba(0, 0, 0, 0.1); /* Transparent background */
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden; /* Ensures the image doesn't overflow */
}

#product-image {
    cursor: pointer;
    height: 28rem;
    max-width: 100%;
    max-height: 100%;
    object-fit: contain; /* Ensures the image fits within the container */
}


#image-container:hover {opacity: 0.7;}

/* The Modal (background) */
#image-viewer {
    display: none;
    position: fixed;
    z-index: 1;
    padding-top: 100px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgb(0,0,0);
    background-color: rgba(0,0,0,0.9);
}
.modal-content {
    margin: auto;
    display: block;
    width: 80%;
    max-width: 700px;
}
.modal-content { 
    animation-name: zoom;
    animation-duration: 0.6s;
}
@keyframes zoom {
    from {transform:scale(0)} 
    to {transform:scale(1)}
}
#image-viewer .close {
    position: absolute;
    top: 2em;
    right: 35px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    z-index: 5;
}
#image-viewer .close:hover,
#image-viewer .close:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
}

#color-selector {
  display: flex !important; /* Force flexbox */
    flex-direction: row !important; /* Ensure row layout */
    gap: 12px; /* Space between circles */
    padding: 10px;
    align-items: center;
    justify-content: flex-start; /* Align from left */
    flex-wrap: wrap; /* Allow wrapping if needed */
}

.color-circle {
  width: 42.5px; /* Adjust size */
  height: 42.5px;
  border-radius: 50%;
  display: inline-block;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  border: 3px solid rgba(0, 0, 0, 0.75); /* More visible outline */
}

.color-circle:hover {
  transform: scale(1.15);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
}

.lazy {
    filter: blur(10px);
    transition: filter 1s ease-in-out;
}

.lazy.loaded {
    filter: blur(0);
}


@media only screen and (max-width: 700px){
    .modal-content {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <section>
        <nav class="navbar fixed-top navbar-expand-lg bg-black">          
            <div class="container-fluid">
                <a class="navbar-brand" href="#"><img src="/src/assets/images/logo.png" alt="" width="75px" height="75px"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                    <h3><a class="nav-link" aria-current="page" href="./index.html">Bemutatkozás</a></h3>
                            </li>
                            <li class="nav-item">
                                    <h3><a class="nav-link active" href="./products.html">Termékeim</a></h3>
                            </li>
                            <li class="nav-item">
                                <h3><a class="nav-link" href="./events.html">Aktuális</a></h3>
                            </li>
                        </ul>

                        <div class="d-flex" id="languageSelector">
                            <button class="btn btn-dark" onclick="changeLanguage('en', event)">
                                EN<svg class="w-12 h-12" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><circle cx="256" cy="256" fill="#f0f0f0" r="256"/><g fill="#d80027"><path d="m244.87 256h267.13c0-23.106-3.08-45.49-8.819-66.783h-258.311z"/><path d="m244.87 122.435h229.556c-15.671-25.572-35.708-48.175-59.07-66.783h-170.486z"/><path d="m256 512c60.249 0 115.626-20.824 159.356-55.652h-318.712c43.73 34.828 99.107 55.652 159.356 55.652z"/><path d="m37.574 389.565h436.852c12.581-20.529 22.338-42.969 28.755-66.783h-494.362c6.417 23.814 16.174 46.254 28.755 66.783z"/></g><path d="m118.584 39.978h23.329l-21.7 15.765 8.289 25.509-21.699-15.765-21.699 15.765 7.16-22.037c-19.106 15.915-35.852 34.561-49.652 55.337h7.475l-13.813 10.035c-2.152 3.59-4.216 7.237-6.194 10.938l6.596 20.301-12.306-8.941c-3.059 6.481-5.857 13.108-8.372 19.873l7.267 22.368h26.822l-21.7 15.765 8.289 25.509-21.699-15.765-12.998 9.444c-1.301 10.458-1.979 21.11-1.979 31.921h256c0-141.384 0-158.052 0-256-50.572 0-97.715 14.67-137.416 39.978zm9.918 190.422-21.699-15.765-21.699 15.765 8.289-25.509-21.7-15.765h26.822l8.288-25.509 8.288 25.509h26.822l-21.7 15.765zm-8.289-100.083 8.289 25.509-21.699-15.765-21.699 15.765 8.289-25.509-21.7-15.765h26.822l8.288-25.509 8.288 25.509h26.822zm100.115 100.083-21.699-15.765-21.699 15.765 8.289-25.509-21.7-15.765h26.822l8.288-25.509 8.288 25.509h26.822l-21.7 15.765zm-8.289-100.083 8.289 25.509-21.699-15.765-21.699 15.765 8.289-25.509-21.7-15.765h26.822l8.288-25.509 8.288 25.509h26.822zm0-74.574 8.289 25.509-21.699-15.765-21.699 15.765 8.289-25.509-21.7-15.765h26.822l8.288-25.509 8.288 25.509h26.822z" fill="#0052b4"/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>
                            </button>
                            <button class="btn btn-dark active" onclick="changeLanguage('hu', event)">
                                HU<svg class="w-12 h-12" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m15.923 166.957c-10.29 27.734-15.923 57.729-15.923 89.043s5.633 61.311 15.923 89.043l240.077 22.261 240.077-22.261c10.29-27.732 15.923-57.729 15.923-89.043s-5.633-61.309-15.923-89.043l-240.077-22.261z" fill="#f0f0f0"/><path d="m256 0c-110.07 0-203.906 69.472-240.076 166.957h480.155c-36.173-97.485-130.007-166.957-240.079-166.957z" fill="#d80027"/><path d="m256 512c110.072 0 203.906-69.472 240.078-166.957h-480.154c36.17 97.485 130.006 166.957 240.076 166.957z" fill="#6da544"/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>
                            </button>
                            <button class="btn btn-dark" onclick="changeLanguage('de', event)">
                                DE<svg class="w-12 h-12" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m15.923 345.043c36.171 97.484 130.006 166.957 240.077 166.957s203.906-69.473 240.077-166.957l-240.077-22.26z" fill="#ffda44"/><path d="m256 0c-110.071 0-203.906 69.472-240.077 166.957l240.077 22.26 240.077-22.261c-36.171-97.484-130.006-166.956-240.077-166.956z"/><path d="m15.923 166.957c-10.29 27.733-15.923 57.729-15.923 89.043s5.633 61.31 15.923 89.043h480.155c10.29-27.733 15.922-57.729 15.922-89.043s-5.632-61.31-15.923-89.043z" fill="#d80027"/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>
                            </button>
                        </div>
                    </div>
            </div>
        </nav>
        <br><br><br><br>
    </section>
    <section id="content" class="bg-danger-subtle bg-gradient">
        <div class="container">
            <div class="page-header d-flex justify-content-around">
                <span class="h1 align-middle">
                    <h1>Termékeink</h1>
                </span>
            </div>
            <br>

<div class="card mb-3 bg-secondary-subtle bg-gradient">
  <div class="row g-0">
    <div class="col-md-4">
    <div class="row" id="image-container">   
        <img id="product-image" class="img-fluid rounded-start" alt="Product image">
    </div>
    <br>
    <div class="row">
      <h3>Méretek:</h3>
        <div id="sizeSelector"></div>
      <p>Választott méret: <span id="selectedSize">None</span></p>
    </div>
    <div class="row">
      <h3>Színek:</h3>
        <div id="colorSelector"></div>
<!--       <p>Selected Color: <span id="selectedColor">None</span></p>
 -->    </div>
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h2 class="card-title text-center" id="product-name">Card title</h2>
        <p class="card-text" id="product-description"></p>
        <br><br>
        <hr>
        <br><br>
        <h3 class="card-text text-danger text-center align-bottom">Kérjen árajánlatot!</h3>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div id="image-viewer">
  <span class="close">&times;</span>
  <img class="modal-content" id="full-image">
</div>

</section>
<section>
    <div
    id="footer-section" class="d-flex border-top border-black flex-wrap justify-content-around align-items-center py-3 bg-warning-subtle bg-gradient text-warning-emphasis bottom">
        <div class="col-md-4 d-flex align-items-center order-1">
            <span class="mb-3 mb-md-0">
                <div class="container">
                    <p class="h3">
                    Cégünket és termékeinket nem csak weboldalunkon, hanem az alábbi „social media” felületeken is
                    elérheti!
                    Keressen bennünket egyéb elérhetőségeinken is!
                </p>
                </div>
            </span>
        </div>
        <div class="nav col-md-4 justify-content-end d-flex order-2">
            <div>
                <p class="h3">
                    Buglyó Imre
                </p>
                <p>
                    Egyéni vállalkozó
                </p>
                <hr>
                <p>
                    <i class="bi bi-geo-alt-fill"></i> <a href="https://www.google.com/maps/search/?api=1&query=Nagyhegyes,+Tulip%C3%A1n+utca+22,+Magyarorsz%C3%A1g" target="_blank">
                        Nagyhegyes, Tulipán utca 22. Magyarország
                      </a>
                </p>
                <p>
                    <i class="bi bi-telephone-fill"></i> <a href="tel:+36303258956">+36-30/325-89-56</a>
                </p>
                <p>
                    <i class="bi bi-envelope-fill"></i> <a href="mailto:bugimi83@gmail.com">bugimi83@gmail.com</a>
                </p>
                <p>

                    
                        <a class="text-body-secondary" href="https://www.tiktok.com/" target="_blank"><img
                                    class="bi" width="50" height="50"
                                    src="https://www.cdnlogo.com/logos/t/6/tiktok-app-icon.svg"></a>
                        <a class="text-body-secondary" href="https://www.instagram.com/" target="_blank"><img
                                    class="bi" width="50" height="50"
                                    src="https://static.cdnlogo.com/logos/i/4/instagram.svg"></a>
                        <a class="text-body-secondary"
                                href="https://www.facebook.com/profile.php?id=61552556406961" target="_blank"><img class="bi"
                                    width="50" height="50" src="https://www.cdnlogo.com/logos/f/84/facebook.svg"></a>
                    

                </p>
            </div>
        </div>
    </div>

    <footer class="d-flex flex-wrap py-3 border-top border-black bg-black bottom bg-gradient container-fluid">
        <div class="col-md-4 d-flex align-items-center">
            <a href="#" class="mb-3 me-2 mb-md-0 text-decoration-none lh-1">
                <img class="rounded-circle" width="37.5" height="37.5" src="/src/assets/images/developer/faulogo-cropped.png" />
            </a>
            <span class="mb-3 mb-md-0 text-body-secondary">© 2024 Fox All Up</span>
        </div>
    </footer>
</section>
<!-- Ezek lesznek majd élesben használva. Butás CORS miatt muszáj inline kóddal fejlesztenem
<script src="./src/js/product.js"></script>
<script src="./src/js/main.js"></script>

Inline kód: -->

<script>
const products = {
    cylindrical:[
      { id: 1, name: 'Cylindrical Burgundy Candle', shape: 'cylindrical', color: 'burgundy' },
      { id: 2, name: 'Cylindrical Cognac Candle', shape: 'cylindrical', color: 'cognac' },
      { id: 3, name: 'Cylindrical Creamy Peach Candle', shape: 'cylindrical', color: 'creamy_peach' },
      { id: 4, name: 'Cylindrical Ice Blue Candle', shape: 'cylindrical', color: 'ice_blue' },
      { id: 5, name: 'Cylindrical Light Blue Candle', shape: 'cylindrical', color: 'light_blue' },
      { id: 6, name: 'Cylindrical Mint Candle', shape: 'cylindrical', color: 'mint' },
      { id: 7, name: 'Cylindrical Orange Candle', shape: 'cylindrical', color: 'orange' },
      { id: 8, name: 'Cylindrical Peach Candle', shape: 'cylindrical', color: 'peach' },
      { id: 9, name: 'Cylindrical Pink Candle', shape: 'cylindrical', color: 'pink' },
      { id: 10, name: 'Cylindrical Purple Candle', shape: 'cylindrical', color: 'purple' },
      { id: 11, name: 'Cylindrical Red Special Candle', shape: 'cylindrical', color: 'red_special' },
      { id: 12, name: 'Cylindrical Red Candle', shape: 'cylindrical', color: 'red' },
      { id: 13, name: 'Cylindrical White Candle', shape: 'cylindrical', color: 'white' },
      { id: 14, name: 'Cylindrical Wine Candle', shape: 'cylindrical', color: 'wine' },
      { id: 15, name: 'Cylindrical Yellow Candle', shape: 'cylindrical', color: 'yellow' }
    ],

    pyramid:[
      { id: 19, name: 'Pyramid Blue Candle', shape: 'pyramid', color: 'blue' },
      { id: 20, name: 'Pyramid Burgundy Candle', shape: 'pyramid', color: 'burgundy' },
      { id: 21, name: 'Pyramid Cognac Candle', shape: 'pyramid', color: 'cognac' },
      { id: 22, name: 'Pyramid Dark Blue Candle', shape: 'pyramid', color: 'dark_blue' },
      { id: 23, name: 'Pyramid Green Candle', shape: 'pyramid', color: 'green' },
      { id: 24, name: 'Pyramid Orange Candle', shape: 'pyramid', color: 'orange' },
      { id: 25, name: 'Pyramid Peach Candle', shape: 'pyramid', color: 'peach' },
      { id: 26, name: 'Pyramid Pink Candle', shape: 'pyramid', color: 'pink' },
      { id: 27, name: 'Pyramid Purple Candle', shape: 'pyramid', color: 'purple' },
      { id: 28, name: 'Pyramid Red Candle', shape: 'pyramid', color: 'red' },
      { id: 29, name: 'Pyramid Turquoise Candle', shape: 'pyramid', color: 'turquoise' },
      { id: 30, name: 'Pyramid White Candle', shape: 'pyramid', color: 'white' },
      { id: 31, name: 'Pyramid Wine Candle', shape: 'pyramid', color: 'wine' },
      { id: 32, name: 'Pyramid Yellow Candle', shape: 'pyramid', color: 'yellow' }
    ],

    special:[
      { id: 33, name: 'Special Apple Green Candle', shape: 'special', color: 'apple_green' },
      { id: 34, name: 'Special Blue Candle', shape: 'special', color: 'blue' },
      { id: 35, name: 'Special Burgundy Candle', shape: 'special', color: 'burgundy' },
      { id: 36, name: 'Special Cognac Candle', shape: 'special', color: 'cognac' },
      { id: 37, name: 'Special Dark Blue Candle', shape: 'special', color: 'dark_blue' },
      { id: 38, name: 'Special Orange Candle', shape: 'special', color: 'orange' },
      { id: 39, name: 'Special Peach Candle', shape: 'special', color: 'peach' },
      { id: 40, name: 'Special Pink Candle', shape: 'special', color: 'pink' },
      { id: 41, name: 'Special Purple Candle', shape: 'special', color: 'purple' },
      { id: 42, name: 'Special Red Candle', shape: 'special', color: 'red' },
      { id: 43, name: 'Special Turquoise Candle', shape: 'special', color: 'turquoise' },
      { id: 44, name: 'Special White Candle', shape: 'special', color: 'white' }
    ],

    spherical:[
      { id: 45, name: 'Spherical Burgundy Candle', shape: 'spherical', color: 'burgundy' },
      { id: 46, name: 'Spherical Cognac Candle', shape: 'spherical', color: 'cognac' },
      { id: 47, name: 'Spherical Dark Blue Candle', shape: 'spherical', color: 'dark_blue' },
      { id: 48, name: 'Spherical Orange Candle', shape: 'spherical', color: 'orange' },
      { id: 49, name: 'Spherical Pastel Blue Candle', shape: 'spherical', color: 'pastel_blue' },
      { id: 50, name: 'Spherical Peach Candle', shape: 'spherical', color: 'peach' },
      { id: 51, name: 'Spherical Purple Candle', shape: 'spherical', color: 'purple' },
      { id: 52, name: 'Spherical White Candle', shape: 'spherical', color: 'white' },
      { id: 53, name: 'Spherical Yellow Candle', shape: 'spherical', color: 'yellow' }
    ],

    square_prism:[
      { id: 100, name: 'Cube Dark Blue Candle', shape: 'cube', color: 'dark_blue' },
      { id: 101, name: 'Cube Peach Candle', shape: 'cube', color: 'peach' },
      { id: 102, name: 'Cube Pink Candle', shape: 'cube', color: 'pink' },
      { id: 54, name: 'Square Prism Blue Candle', shape: 'square_prism', color: 'blue' },
      { id: 55, name: 'Square Prism Burgundy Candle', shape: 'square_prism', color: 'burgundy' },
      { id: 56, name: 'Square Prism Cognac Candle', shape: 'square_prism', color: 'cognac' },
      { id: 57, name: 'Square Prism Dark Blue Candle', shape: 'square_prism', color: 'dark_blue' },
      { id: 58, name: 'Square Prism Green Candle', shape: 'square_prism', color: 'green' },
      { id: 59, name: 'Square Prism Orange Candle', shape: 'square_prism', color: 'orange' },
      { id: 60, name: 'Square Prism Peach Candle', shape: 'square_prism', color: 'peach' },
      { id: 61, name: 'Square Prism Pink Candle', shape: 'square_prism', color: 'pink' },
      { id: 62, name: 'Square Prism Purple Candle', shape: 'square_prism', color: 'purple' },
      { id: 63, name: 'Square Prism Red Candle', shape: 'square_prism', color: 'red' },
      { id: 64, name: 'Square Prism Turquoise Candle', shape: 'square_prism', color: 'turquoise' },
      { id: 65, name: 'Square Prism White Candle', shape: 'square_prism', color: 'white' },
      { id: 66, name: 'Square Prism Yellow Candle', shape: 'square_prism', color: 'yellow' }
    ],

    triangular_prism:[
      { id: 67, name: 'Triangular Prism Blue Candle', shape: 'triangular_prism', color: 'blue' },
      { id: 68, name: 'Triangular Prism Burgundy Candle', shape: 'triangular_prism', color: 'burgundy' },
      { id: 69, name: 'Triangular Prism Cognac Candle', shape: 'triangular_prism', color: 'cognac' },
      { id: 70, name: 'Triangular Prism Green Candle', shape: 'triangular_prism', color: 'green' },
      { id: 71, name: 'Triangular Prism Orange Candle', shape: 'triangular_prism', color: 'orange' },
      { id: 72, name: 'Triangular Prism Peach Candle', shape: 'triangular_prism', color: 'peach' },
      { id: 73, name: 'Triangular Prism Purple Candle', shape: 'triangular_prism', color: 'purple' },
      { id: 74, name: 'Triangular Prism Red Candle', shape: 'triangular_prism', color: 'red' },
      { id: 75, name: 'Triangular Prism Turquoise Candle', shape: 'triangular_prism', color: 'turquoise' },
      { id: 76, name: 'Triangular Prism White Candle', shape: 'triangular_prism', color: 'white' },
      { id: 77, name: 'Triangular Prism Yellow Candle', shape: 'triangular_prism', color: 'yellow' }
    ]

    /* square_steps:[
      { id: 78, name: 'Square Prism Steps Red Candle', shape: 'square_prism_steps', color: 'red' }
    ] */
  };

  const physicalProps = {
    // Cylindrical Candles
    cylindrical: [
        { type: 'C1', baseAreaMm2: 45, heightMm: 65, weightG: 95, burnTimeHours: '-' },
        { type: 'C3', baseAreaMm2: 40, heightMm: 80, weightG: 85, burnTimeHours: '-' },
        { type: 'C5', baseAreaMm2: 65, heightMm: 50, weightG: 150, burnTimeHours: 10 },
        { type: 'C10', baseAreaMm2: 65, heightMm: 100, weightG: 300, burnTimeHours: 20 },
        { type: 'C15', baseAreaMm2: 65, heightMm: 150, weightG: 450, burnTimeHours: 30 },
        { type: 'C19', baseAreaMm2: 40, heightMm: 170, weightG: 170, burnTimeHours: '-' },
        { type: 'C17', baseAreaMm2: 65, heightMm: 170, weightG: 510, burnTimeHours: 35 },
        { type: 'C20', baseAreaMm2: 65, heightMm: 200, weightG: 600, burnTimeHours: 40 },
        { type: 'C25', baseAreaMm2: 65, heightMm: 250, weightG: 750, burnTimeHours: 50 },
        { type: 'C30', baseAreaMm2: 65, heightMm: 300, weightG: 900, burnTimeHours: 60 }
    ], 

    // Triangular Prism Candles
    triangular_prism: [
        { type: 'D10', baseAreaMm2: '∆ 60x60', heightMm: 100, weightG: 280, burnTimeHours: 20 },
        { type: 'D15', baseAreaMm2: '∆ 60x60', heightMm: 150, weightG: 420, burnTimeHours: 30 },
        { type: 'D20', baseAreaMm2: '∆ 60x60', heightMm: 200, weightG: 560, burnTimeHours: 40 },
        { type: 'D25', baseAreaMm2: '∆ 60x60', heightMm: 250, weightG: 700, burnTimeHours: 50 },
        { type: 'D35', baseAreaMm2: '∆ 60x60', heightMm: 350, weightG: 980, burnTimeHours: 70 }
    ],

    // Pyramid Candles
    pyramid: [
        { type: 'P10', baseAreaMm2: '□ 70x70', heightMm: 100, weightG: 156, burnTimeHours: '-' },
        { type: 'P15', baseAreaMm2: '□ 90x90', heightMm: 150, weightG: 340, burnTimeHours: '-' },
        { type: 'P20', baseAreaMm2: '□ 100x100', heightMm: 200, weightG: 550, burnTimeHours: '-' }
    ],

    // Square Prism Candles
    square_prism: [
        { type: 'V5', baseAreaMm2: '□ 60x60', heightMm: 50, weightG: 140, burnTimeHours: 10 },
        { type: 'V10', baseAreaMm2: '□ 60x60', heightMm: 100, weightG: 280, burnTimeHours: 20 },
        { type: 'V15', baseAreaMm2: '□ 60x60', heightMm: 150, weightG: 420, burnTimeHours: 30 },
        { type: 'V20', baseAreaMm2: '□ 60x60', heightMm: 200, weightG: 560, burnTimeHours: 40 },
        { type: 'V25', baseAreaMm2: '□ 60x60', heightMm: 250, weightG: 700, burnTimeHours: 50 },
        { type: 'V35', baseAreaMm2: '□ 60x60', heightMm: 350, weightG: 980, burnTimeHours: 70 }
    ],

    // Spherical Candles
    spherical: [
        { type: 'K6', baseAreaMm2: 60, heightMm: 60, weightG: 120, burnTimeHours: '-' },
        { type: 'K8', baseAreaMm2: 80, heightMm: 80, weightG: 200, burnTimeHours: '-' },
        { type: 'K10', baseAreaMm2: 100, heightMm: 100, weightG: 475, burnTimeHours: '-' },
        { type: 'K15', baseAreaMm2: 150, heightMm: 150, weightG: 1340, burnTimeHours: '-' }
    ],

    // Special Candles
    special: [
        { type: 'X5', baseAreaMm2: 80, heightMm: 80, weightG: 335, burnTimeHours: 'R_20' },
        { type: 'X10', baseAreaMm2: 100, heightMm: 100, weightG: 590, burnTimeHours: 'R_25' },
        { type: '3B10', baseAreaMm2: 150, heightMm: 100, weightG: 1350, burnTimeHours: 30 }
    ],

    //Advent Candles
    advent: [
        { type: 'C-advent', baseAreaMm2: 40, heightMm: '50-64-77-90', weightG: 410, burnTimeHours: '-' }
    ]
};

const fileStructure = {
  "triangular_prism": {
    "D35":[
        "red-large.jpg",
        "roze-large.jpg",
        "wine-large.jpg",
        "apricot-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "white-large.jpg"
      ],
    "D25":[
        "red-large.jpg",
        "roze-large.jpg",
        "burgundy-large.jpg",
        "wine-large.jpg",
        "apricot-large.jpg",
        "peach-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "caramel-large.jpg",
        "cognac-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "white-large.jpg"
    ],
    "D20":[
        "red-large.jpg",
        "roze-large.jpg",
        "wine-large.jpg",
        "apricot-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "white-large.jpg"
      ],
    "D15":[
        "red-large.jpg",
        "roze-large.jpg",
        "wine-large.jpg",
        "apricot-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "caramel-large.jpg",
        "green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "white-large.jpg"
      ],
    "D10":[
        "red-large.jpg",
        "roze-large.jpg",
        "wine-large.jpg",
        "apricot-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "white-large.jpg"
      ]
  },
  "square_prism": {
    "V5":[
        "pink-large.jpg",
        "peach-large.jpg",
        "orange-large.jpg",
        "darkened_orange-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
      ],
    "V35":[
        "red-large.jpg",
        "roze-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "apricot-large.jpg",
        "cognac-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
      ],
    "V25":[
        "red-large.jpg",
        "roze-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "apricot-large.jpg",
        "caramel-large.jpg",
        "green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg"
      ],
    "V20":[
        "red-large.jpg",
        "roze-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "apricot-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
    ],
    "V15":[
        "red-large.jpg",
        "pink-large.jpg",
        "dark_orange-large.jpg",
        "orange-large.jpg",
        "apricot-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "turquoise-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
      ],
    "V10":[
        "red-large.jpg",
        "roze-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "apricot-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "turquoise-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
      ]
  },
  "spherical": {
    "K6":[
        "orange-large.jpg",
        "yellow-large.jpg",
        "peach-large.jpg",
        "cognac-large.jpg",
        "burgundy-large.jpg",
        "purple-large.jpg",
        "pastel_blue-large.jpg",
        "dark_blue-large.jpg",
        "white-large.jpg"
    ]
  },
  "special": {
    "3B10":[
        "red-large.jpg",
        "burgundy-large.jpg",
        "orange-large.jpg",
        "peach-large.jpg",
        "cognac-large.jpg",
        "pink-large.jpg",
        "purple-large.jpg",
        "apple_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "white-large.jpg"
    ]
  },
/*   "sample":[
      "square_prism_steps-red-large.jpg",
      "square_prism_steps-red-medium.jpg",
      "square_prism_steps-red-small.jpg"
    ], */
  "pyramid": {
    "P10":[
        "red-large.jpg",
        "burgundy-large.jpg",
        "orange-large.jpg",
        "yellow-large.jpg",
        "peach-large.jpg",
        "cognac-large.jpg",
        "pink-large.jpg",
        "purple-large.jpg",
        "green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
    ]
  },
  "cylindrical": {
    "C5":[
        "red-large.jpg",
        "roze-large.jpg",
        "dark_orange-large.jpg",
        "mandarin-large.jpg",
        "orange-large.jpg",
        "cognac-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
    ],
    "C30":[
        "red-large.jpg",
        "roze-large.jpg",
        "dark_orange-large.jpg",
        "orange-large.jpg",
        "apricot-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
    ],
    "C25":[
        "dark_roze-large.jpg",
        "roze-large.jpg",
        "mandarin-large.jpg",
        "orange-large.jpg",
        "apricot-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
    ],
    "C20":[
        "red-large.jpg",
        "roze-large.jpg",
        "dark_orange-large.jpg",
        "orange-large.jpg",
        "apricot-large.jpg",
        "caramel-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
    ],
    "C17":[
        "red-large.jpg",
        "roze-large.jpg",
        "dark_orange-large.jpg",
        "orange-large.jpg",
        "apricot-large.jpg",
        "cognac-large.jpg",
        "dark_green-large.jpg",
        "turquoise-large.jpg",
        "blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "wine-large.jpg",
        "white-large.jpg"
    ],
    "C10":[
        "red-large.jpg",
        "roze-large.jpg",
        "pink-large.jpg",
        "light_pink-large.jpg",
        "creamy_pink-large.jpg",
        "ice_pink-large.jpg",
        "dark_orange-large.jpg",
        "darkened_orange-large.jpg",
        "orange-large.jpg",
        "mandarin-large.jpg",
        "creamy_peach-large.jpg",
        "yellow-large.jpg",
        "cognac-large.jpg",
        "caramel-large.jpg",
        "mint-large.jpg",
        "dark_green-large.jpg",
        "blue-large.jpg",
        "light_blue-large.jpg",
        "ice_blue-large.jpg",
        "steel_blue-large.jpg",
        "dark_blue-large.jpg",
        "dark_purple-large.jpg",
        "purple-large.jpg",
        "wine-large.jpg",
        "snow-large.jpg",
        "white-large.jpg"
    ]
  },
  "advent": {
    "CAdvent":[
        "crimson-large.jpg",
        "firebrick-large.jpg"
    ]
  }
};

const manualColorMap = {
    "apricot": "peachpuff",
    "cognac": "saddlebrown",
    "wine": "darkRed",
    "roze": "deepPink",
    "burgundy": "maroon",
    "dark_blue": "darkBlue",
    "orange": "orange",
    "pastel_blue": "powderBlue",
    "peach": "lightSalmon",
    "purple": "purple",
    "dark_purple": "indigo",
    "white": "white",
    "yellow": "yellow",
    "caramel": "chocolate",
    "turquoise": "turquoise",
    "firebrick": "firebrick",
    "crimson": "crimson",
    "blue": "dodgerBlue",
    "pink": "hotPink",
    "cognac": "peru",
    "blue": "blue",
    "creamy_peach": "navajoWhite",
    "creamy_pink": "hotPink",
    "steel_blue": "steelBlue",
    "dark_green": "darkGreen",
    "dark_orange": "orangeRed",
    "ice_blue": "lightCyan",
    "ice_pink": "lightPink",
    "mandarin": "darkOrange",
    "mint": "paleGreen",
    "red": "red",
    "darkened_orange": "gold",
    "snow": "snow",
    "dark_roze": "crimson",
    "green": "green",
    "apple_green": "greenYellow"
};

/* [
    {
        "id": 1,
        "name": "Cylindrical Candle",
        "shape": "cylindrical",
        "sizes": [
            {
                "type": "C5",
                "physicalProps": { "baseAreaMm2": 65, "heightMm": 50, "weightG": 150, "burnTimeHours": 10 },
                "colors": [
                    { "color": "burgundy", "image": "cylindrical/C5/burgundy.webp" },
                    { "color": "cognac", "image": "cylindrical/C5/cognac.webp" }
                ]
            },
            {
                "type": "C10",
                "physicalProps": { "baseAreaMm2": 65, "heightMm": 100, "weightG": 300, "burnTimeHours": 20 },
                "colors": [
                    { "color": "blue", "image": "cylindrical/C10/blue.webp" },
                    { "color": "red", "image": "cylindrical/C10/red.webp" }
                ]
            }
        ]
    },
    {
        "id": 2,
        "name": "Triangular Prism Candle",
        "shape": "triangular_prism",
        "sizes": [
            {
                "type": "D10",
                "physicalProps": { "baseAreaMm2": "∆ 60x60", "heightMm": 100, "weightG": 280, "burnTimeHours": 20 },
                "colors": [
                    { "color": "blue", "image": "triangular_prism/D10/blue.webp" },
                    { "color": "red", "image": "triangular_prism/D10/red.webp" }
                ]
            },
            {
                "type": "D35",
                "physicalProps": { "baseAreaMm2": "∆ 60x60", "heightMm": 350, "weightG": 980, "burnTimeHours": 70 },
                "colors": [
                    { "color": "apricot", "image": "triangular_prism/D35/apricot.webp" },
                    { "color": "turquoise", "image": "triangular_prism/D35/turquoise.webp" }
                ]
            }
        ]
    }
]
 */

let currentSize, currentColor;

function toCamelCase(color) {
    return color.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());
}

function getClosestColor(filename) {
    const cleanName = filename.replace(/-large\.jpg$/, ""); // Remove '-large.jpg'
    const camelCaseName = toCamelCase(cleanName); // Convert to camelCase

    // 🔹 First, check manual map
    if (manualColorMap[camelCaseName]) return manualColorMap[camelCaseName];
/* 
    // 🔹 Then, check exact match
    if (knownColors.includes(camelCaseName)) return camelCaseName;
 */
    // 🔥 Apply Levenshtein Distance for closest match
    let closestMatch = "";
    let minDistance = Infinity;

/*     knownColors.forEach(color => {
        let distance = levenshtein(camelCaseName, color);
        if (distance < minDistance) {
            minDistance = distance;
            closestMatch = color;
        }
    }); */
    return closestMatch;
}

// Levenshtein function (same as before)
function levenshtein(a, b) {
    if (!a.length) return b.length;
    if (!b.length) return a.length;
    let matrix = Array(a.length + 1).fill(null).map(() => Array(b.length + 1).fill(null));
    
    for (let i = 0; i <= a.length; i++) matrix[i][0] = i;
    for (let j = 0; j <= b.length; j++) matrix[0][j] = j;
    
    for (let i = 1; i <= a.length; i++) {
        for (let j = 1; j <= b.length; j++) {
            const cost = a[i - 1] === b[j - 1] ? 0 : 1;
            matrix[i][j] = Math.min(
                matrix[i - 1][j] + 1, 
                matrix[i][j - 1] + 1, 
                matrix[i - 1][j - 1] + cost
            );
        }
    }
    return matrix[a.length][b.length];
}

/* Object.entries(fileStructure).forEach(([category, items]) => {
    const types = Object.keys(items);
    const itemsArr = Object.values(items);

    const randomType = types[[Math.floor(Math.random() * types.length)]];
    const randomItem = items[randomType][Math.floor(Math.random() * items[randomType].length)];

     console.log(`All the types : ${Object.keys(items)}`);
    console.log(`Category : ${category}`);
    console.log(`All the items : ${itemsArr}`);
    console.log(`Random type : ${randomType}`);
    console.log(`Random item : ${randomItem}`); 
    return randomType, randomItem;
  }); 
  
*/

 // Extract product ID from the URL
const urlParams = new URLSearchParams(window.location.search);
const category = urlParams.get('category'); // Get category from the URL
let productType = 'Category not found.';
let randomType, randomItem, itemsArr;
let colorsArr = [];

Object.entries(fileStructure[category]).forEach(([category, items]) => {
    itemsArr = Object.values(items);
    return itemsArr;
  });

(()=> { 
  itemsArr.forEach(filename => {
    colorsArr.push(getClosestColor(filename));
  });
})();
console.log(colorsArr);

//ColorSelector:
let defaultOriginalColor;

function createColorSelector(colors) {
    const container = document.getElementById("colorSelector");
    container.innerHTML = ""; // Clear previous content



    //Get current size:
    colors.forEach(color => {
        const circle = document.createElement("span");
        const key = manualColorMap[color] || color;
        circle.className = "color-circle";
        circle.dataset.color = color;
        circle.style.backgroundColor = key;

        // Add click event
        circle.addEventListener("mouseover", function () {
            document.querySelectorAll(".color-circle").forEach(c => c.classList.remove("selected"));
            this.classList.add("selected");

            console.log(color);
            
            currentColor = key;
            currentSize = document.querySelector(".size-button.selected").textContent;
            document.querySelector('#product-image').src = `/src/assets/images/products/candles/${category}/${currentSize}/${color}-large.jpg`;
            document.getElementById("full-image").src = `/src/assets/images/products/candles/${category}/${currentSize}/${color}-large.jpg`;
        });
        container.appendChild(circle);
    });
    document.querySelector(".color-circle:first-of-type").classList.add("selected");
    let defaultColor = document.querySelector(".selected").getAttribute("data-color");
    defaultOriginalColor = Object.entries(manualColorMap).find(([k, v]) => v === defaultColor)?.[0];
//    document.getElementById("selectedColor").textContent = defaultOriginalColor;

/*     let currentSize = document.querySelector(".size-button.selected").textContent;;
    if (!currentSize){
      currentSize = randomType;
    } */
//    console.log(document.querySelector(".selected").textContent);
    currentColor = defaultOriginalColor;
    return defaultOriginalColor, currentColor;    
}
let availableColors = fileStructure[category][Object.keys(fileStructure[category])[0]].map(file => {
            return file.replace("-large.jpg", "").replace(/_/g, "_"); // Preserve spaces
            }).filter(color => manualColorMap[color]); // Only include mapped colors
console.log(availableColors);
createColorSelector(availableColors);
//createColorSelector(colorsArr);

//const defaultFile = filesArr[0];
//console.log(getClosestColor(defaultFile));

/* function getRandoms() {
    const types = Object.keys(fileStructure[category]);  // Get the types from the category's items
//    console.log(`Types : ${types}`);

    const randomTypeFromCategory = types[Math.floor(Math.random() * types.length)];
    randomType = randomTypeFromCategory;  // Set the global variable
//    console.log(`Random Type : ${randomType}`);

    const itemKeys = Object.keys(fileStructure[category][randomType]);  // Get the valid keys of the chosen type
//    console.log(`Valid Item Keys: ${itemKeys}`);

    const randomItemFromType = itemKeys[Math.floor(Math.random() * itemKeys.length)];
    randomItem = fileStructure[category][randomType][randomItemFromType];  // Set the global variable

//    console.log(`Random Item : ${randomItem}`);
    return { randomType, randomItem };  // Return both values as an object
}

const result = getRandoms(); */
//console.log(`Random type : ${result.randomType}`);  // You can now access randomType
//console.log(`Random item : ${result.randomItem}`);  // You can now access randomItem



// Find products by category
//const filteredProducts = products.filter(p => p.category == category);

// If there are products in the selected category, display the first one (or modify as needed)
//if (filteredProducts.length > 0) {
//    const product = filteredProducts[0]; // Use the first product in the filtered list

    // Display product details
    let categoryHun = "";

switch (category) {
    case "triangular_prism":
        categoryHun = "Háromszög Alapú Hasáb Gyertyák";
        break;
    case "square_prism":
        categoryHun = "Négyzet Alapú Hasáb Gyertyák";
        break;
    case "spherical":
        categoryHun = "Gömb Gyertyák";
        break;
    case "special":
        categoryHun = "Különleges Gyertyák";
        break;
    case "pyramid":
        categoryHun = "Piramis Gyertyák";
        break;
    case "cylindrical":
        categoryHun = "Hengeres Gyertyák";    
        break;
    case "advent":
        categoryHun = "Adventi Gyertyák";
        break;
    default:
        break;
}

document.querySelector('#product-name').textContent = categoryHun;
document.querySelector('#product-description').innerHTML = 
    `<hr>
    <table class="table table-striped">
        <thead>
            <tr>
                <th colspan="5" class="text-center h5">Fizikai Tulajdonságok</th>
            </tr>
        </thead>
        <thead>
            <tr>
                <th scope="col">Típus</th>
                <th scope="col">Alapterület (mm²)</th>
                <th scope="col">Magasság (mm)</th>
                <th scope="col">Súly (g)</th>
                <th scope="col">Égési Idő (óra)</th>
            </tr>
        </thead>
        <tbody id="tableBody">
        </tbody>
    </table>`;

// Loop through the physical properties based on the product shape
if (category != 'cube') {
    for (let i = 0; i < physicalProps[category].length; i++) {
        document.querySelector('#tableBody').innerHTML += 
            `<tr>
                <th scope="col">${physicalProps[category][i].type}</th>
                <td>${physicalProps[category][i].baseAreaMm2}</td>
                <td>${physicalProps[category][i].heightMm}</td>
                <td>${physicalProps[category][i].weightG}</td>
                <td>${physicalProps[category][i].burnTimeHours}</td>
            </tr>`;
    }
} else {
    document.querySelector('#tableBody').innerHTML += 
        `<tr>
            <th scope="col">${physicalProps['square_prism'][0].type}</th>
            <td>${physicalProps['square_prism'][0].baseAreaMm2}</td>
            <td>${physicalProps['square_prism'][0].heightMm}</td>
            <td>${physicalProps['square_prism'][0].weightG}</td>
            <td>${physicalProps['square_prism'][0].burnTimeHours}</td>
        </tr>`;
}

// Render the default product image
document.querySelector('#product-image').src = `/src/assets/images/products/candles/${category}/${Object.keys(fileStructure[category])[0]}/${Object.values(fileStructure[category])[0][0]}`;
document.getElementById("full-image").src = `/src/assets/images/products/candles/${category}/${Object.keys(fileStructure[category])[0]}/${Object.values(fileStructure[category])[0][0]}`;
document.addEventListener("DOMContentLoaded", function () {
    const images = document.querySelectorAll("img.lazy");

    images.forEach(img => {
        const highRes = img.dataset.src;
        if (!highRes) return;

        img.src = highRes; // Start loading the image
        img.onload = () => img.classList.add("loaded"); // Remove blur after loading
    });
});
	
// Image modal
document.querySelector("#product-image").addEventListener("click", function() {
    document.getElementById("image-viewer").style.display = "block";
});

// Add click event to the close button
document.querySelector("#image-viewer .close").addEventListener("click", function() {
  // Hide the image viewer
  document.getElementById("image-viewer").style.display = "none";
});

//SizeSelector:
//Default size: 
const sizes = Object.keys(fileStructure[category]).sort((a, b) => parseInt(a.match(/\d+/)) - parseInt(b.match(/\d+/))); // Get sizes dynamically
function createSizeSelector(sizes) {
    const container = document.getElementById("sizeSelector");
    container.innerHTML = ""; // Clear previous content


    sizes.forEach(size => {
        const button = document.createElement("button");
        button.className = "size-button";
        button.dataset.size = size;
        button.textContent = size;

        // Add click event
        button.addEventListener("click", function () {
            document.querySelectorAll(".size-button").forEach(b => b.classList.remove("selected"));
            this.classList.add("selected");

//Get current color:
            let currentColor = document.querySelector(".color-circle.selected").getAttribute("data-color");
            console.log("Current color: " + currentColor);
            document.getElementById("selectedSize").textContent = size;
            
            // Update color selector based on selected size
            const availableColors = fileStructure[category][size].map(file => {
            return file.replace("-large.jpg", "").replace(/_/g, "_"); // Preserve spaces
            }).filter(color => manualColorMap[color]); // Only include mapped colors
            
            console.log(`Available colors: ${availableColors}`);

            if (availableColors.includes(currentColor)){
                var colorToSet = currentColor;
            }
            else {
                var colorToSet = availableColors[0];
            }

            console.log(`Color wanted : ${colorToSet}`);

            document.querySelector('#product-image').src = `/src/assets/images/products/candles/${category}/${this.innerText}/${colorToSet}-large.jpg`;
            document.getElementById("full-image").src = `/src/assets/images/products/candles/${category}/${this.innerText}/${currentColor}-large.jpg`;

            createColorSelector(availableColors);
        });

        container.appendChild(button);
    });

    // Select the first size by default
    document.querySelector(".size-button:first-of-type").classList.add("selected");
    document.getElementById("selectedSize").textContent = sizes[0];

    // Trigger color selector for the first size
    const firstSizeColors = fileStructure[category][sizes[0]].map(file => {
        return file.replace("-large.jpg", "").replace(/_/g, ""); 
    }).filter(color => manualColorMap[color]);

    createColorSelector(firstSizeColors);
    currentSize = sizes[0];
    return currentSize;
}
createSizeSelector(sizes);

 </script>
 <script src="../src/js/language.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>
